{"ast":null,"code":"import _objectSpread from \"/Users/nakaokashinzo/Documents/react/notion-clone/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"/Users/nakaokashinzo/Documents/react/notion-clone/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/nakaokashinzo/Documents/react/notion-clone/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/nakaokashinzo/Documents/react/notion-clone/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/nakaokashinzo/Documents/react/notion-clone/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/nakaokashinzo/Documents/react/notion-clone/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/nakaokashinzo/Documents/react/notion-clone/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/Users/nakaokashinzo/Documents/react/notion-clone/src/editablePage.js\";\nimport React from \"react\";\nimport \"./styles.css\";\nimport EditableBlock from \"./editableBlock\";\nimport uid from \"./utils/uid\";\nimport { setCaretToEnd } from \"./utils/caretHelpers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar initialBlock = {\n  id: uid(),\n  html: \"\",\n  tag: \"p\"\n};\nvar EditablePage = /*#__PURE__*/function (_React$Component) {\n  _inherits(EditablePage, _React$Component);\n  var _super = _createSuper(EditablePage);\n  function EditablePage(props) {\n    var _this;\n    _classCallCheck(this, EditablePage);\n    _this = _super.call(this, props);\n    _this.updatePageHandler = _this.updatePageHandler.bind(_assertThisInitialized(_this));\n    _this.addBlockHandler = _this.addBlockHandler.bind(_assertThisInitialized(_this));\n    _this.deleteBlockHandler = _this.deleteBlockHandler.bind(_assertThisInitialized(_this));\n    _this.state = {\n      blocks: [initialBlock]\n    };\n    return _this;\n  }\n  _createClass(EditablePage, [{\n    key: \"updatePageHandler\",\n    value: function updatePageHandler(updatedBlock) {\n      var blocks = this.state.blocks;\n      var index = blocks.map(function (b) {\n        return b.id;\n      }).indexOf(updatedBlock.id);\n      var updatedBlocks = _toConsumableArray(blocks);\n      updatedBlocks[index] = _objectSpread(_objectSpread({}, updatedBlocks[index]), {}, {\n        tag: updatedBlock.tag,\n        html: updatedBlock.html\n      });\n      this.setState({\n        blocks: updatedBlocks\n      });\n    }\n  }, {\n    key: \"addBlockHandler\",\n    value: function addBlockHandler(currentBlock) {\n      var newBlock = {\n        id: uid(),\n        html: \"\",\n        tag: \"p\"\n      };\n      var blocks = this.state.blocks;\n      var index = blocks.map(function (b) {\n        return b.id;\n      }).indexOf(currentBlock.id);\n      var updatedBlocks = _toConsumableArray(blocks);\n      updatedBlocks.splice(index + 1, 0, newBlock);\n      this.setState({\n        blocks: updatedBlocks\n      }, function () {\n        currentBlock.ref.nextElementSibling.focus();\n      });\n    }\n  }, {\n    key: \"deleteBlockHandler\",\n    value: function deleteBlockHandler(currentBlock) {\n      // Only delete the block, if there is a preceding one\n      var previousBlock = currentBlock.ref.previousElementSibling;\n      if (previousBlock) {\n        var blocks = this.state.blocks;\n        var index = blocks.map(function (b) {\n          return b.id;\n        }).indexOf(currentBlock.id);\n        var updatedBlocks = _toConsumableArray(blocks);\n        updatedBlocks.splice(index, 1);\n        this.setState({\n          blocks: updatedBlocks\n        }, function () {\n          setCaretToEnd(previousBlock);\n          previousBlock.focus();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Page\",\n        children: this.state.blocks.map(function (block, key) {\n          return /*#__PURE__*/_jsxDEV(EditableBlock, {\n            id: block.id,\n            tag: block.tag,\n            html: block.html,\n            updatePage: _this2.updatePageHandler,\n            addBlock: _this2.addBlockHandler,\n            deleteBlock: _this2.deleteBlockHandler\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, _this2);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n  return EditablePage;\n}(React.Component);\nexport default EditablePage;","map":{"version":3,"names":["React","EditableBlock","uid","setCaretToEnd","jsxDEV","_jsxDEV","initialBlock","id","html","tag","EditablePage","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","updatePageHandler","bind","_assertThisInitialized","addBlockHandler","deleteBlockHandler","state","blocks","_createClass","key","value","updatedBlock","index","map","b","indexOf","updatedBlocks","_toConsumableArray","_objectSpread","setState","currentBlock","newBlock","splice","ref","nextElementSibling","focus","previousBlock","previousElementSibling","render","_this2","className","children","block","updatePage","addBlock","deleteBlock","fileName","_jsxFileName","lineNumber","columnNumber","Component"],"sources":["/Users/nakaokashinzo/Documents/react/notion-clone/src/editablePage.js"],"sourcesContent":["import React from \"react\";\n\nimport \"./styles.css\";\nimport EditableBlock from \"./editableBlock\";\n\nimport uid from \"./utils/uid\";\nimport { setCaretToEnd } from \"./utils/caretHelpers\";\n\nconst initialBlock = { id: uid(), html: \"\", tag: \"p\" };\n\nclass EditablePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.updatePageHandler = this.updatePageHandler.bind(this);\n    this.addBlockHandler = this.addBlockHandler.bind(this);\n    this.deleteBlockHandler = this.deleteBlockHandler.bind(this);\n    this.state = { blocks: [initialBlock] };\n  }\n\n  updatePageHandler(updatedBlock) {\n    const blocks = this.state.blocks;\n    const index = blocks.map((b) => b.id).indexOf(updatedBlock.id);\n    const updatedBlocks = [...blocks];\n    updatedBlocks[index] = {\n      ...updatedBlocks[index],\n      tag: updatedBlock.tag,\n      html: updatedBlock.html\n    };\n    this.setState({ blocks: updatedBlocks });\n  }\n\n  addBlockHandler(currentBlock) {\n    const newBlock = { id: uid(), html: \"\", tag: \"p\" };\n    const blocks = this.state.blocks;\n    const index = blocks.map((b) => b.id).indexOf(currentBlock.id);\n    const updatedBlocks = [...blocks];\n    updatedBlocks.splice(index + 1, 0, newBlock);\n    this.setState({ blocks: updatedBlocks }, () => {\n      currentBlock.ref.nextElementSibling.focus();\n    });\n  }\n\n  deleteBlockHandler(currentBlock) {\n    // Only delete the block, if there is a preceding one\n    const previousBlock = currentBlock.ref.previousElementSibling;\n    if (previousBlock) {\n      const blocks = this.state.blocks;\n      const index = blocks.map((b) => b.id).indexOf(currentBlock.id);\n      const updatedBlocks = [...blocks];\n      updatedBlocks.splice(index, 1);\n      this.setState({ blocks: updatedBlocks }, () => {\n        setCaretToEnd(previousBlock);\n        previousBlock.focus();\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"Page\">\n        {this.state.blocks.map((block, key) => {\n          return (\n            <EditableBlock\n              key={key}\n              id={block.id}\n              tag={block.tag}\n              html={block.html}\n              updatePage={this.updatePageHandler}\n              addBlock={this.addBlockHandler}\n              deleteBlock={this.deleteBlockHandler}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default EditablePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}